<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rialo Hold'em | Real World Speed</title>
    <style>
        /* RIALO THEME VARIABLES */
        :root {
            --rialo-black: #010101;
            --rialo-beige: #e8e3d5;
            --rialo-mint: #a9ddd3;
            --rialo-dark-mint: #7abeb0;
            --glass-bg: rgba(255, 255, 255, 0.05);
            --border-color: rgba(169, 221, 211, 0.3);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; }

        body {
            background-color: var(--rialo-black);
            color: var(--rialo-beige);
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        /* UI COMPONENTS */
        .container {
            width: 100%;
            max-width: 1000px;
            padding: 20px;
            text-align: center;
            position: relative;
            z-index: 10;
        }

        h1 {
            font-size: 3rem;
            margin-bottom: 10px;
            letter-spacing: -1px;
            color: var(--rialo-mint);
        }

        .subtitle {
            font-size: 1.1rem;
            opacity: 0.7;
            margin-bottom: 40px;
        }

        .card-panel {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-color);
            padding: 40px;
            border-radius: 24px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            transition: all 0.3s ease;
        }

        input, select {
            background: rgba(255,255,255,0.1);
            border: 1px solid var(--border-color);
            color: var(--rialo-mint);
            padding: 15px;
            border-radius: 12px;
            font-size: 1rem;
            margin: 10px 0;
            width: 100%;
            outline: none;
        }

        button {
            background-color: var(--rialo-mint);
            color: var(--rialo-black);
            border: none;
            padding: 15px 30px;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            margin-top: 20px;
            transition: transform 0.2s, background 0.2s;
        }

        button:hover {
            transform: translateY(-2px);
            background-color: var(--rialo-beige);
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* GAME TABLE UI */
        #game-screen { display: none; width: 100%; }
        
        .poker-table {
            background: radial-gradient(circle, #1a2f2a 0%, #010101 80%);
            border: 2px solid var(--rialo-mint);
            border-radius: 100px;
            height: 500px;
            position: relative;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .community-cards {
            display: flex;
            gap: 10px;
            height: 100px;
            margin: 20px 0;
        }

        .playing-card {
            width: 70px;
            height: 100px;
            background: var(--rialo-beige);
            color: var(--rialo-black);
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            font-size: 1.2rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            animation: flipIn 0.5s ease;
        }

        .suit-red { color: #e74c3c; }
        .suit-black { color: #010101; }

        .player-area, .bot-area {
            position: absolute;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .bot-area { top: -60px; left: 50%; transform: translateX(-50%); }
        .player-area { bottom: -60px; left: 50%; transform: translateX(-50%); }

        .avatar {
            width: 60px;
            height: 60px;
            background: var(--rialo-mint);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            color: var(--rialo-black);
            border: 4px solid var(--rialo-black);
        }

        .hand { display: flex; gap: 5px; }

        .pot-display {
            font-size: 1.2rem;
            color: var(--rialo-mint);
            margin-bottom: 10px;
        }

        .controls {
            display: flex;
            gap: 10px;
            margin-top: 80px;
            justify-content: center;
        }

        .controls button { width: auto; margin-top: 0; }

        .status-log {
            margin-top: 20px;
            color: var(--rialo-mint);
            height: 30px;
        }

        /* LOGO SHAPE (CSS ONLY) */
        .logo-mark {
            width: 50px;
            height: 50px;
            border: 4px solid var(--rialo-mint);
            border-radius: 50% 50% 50% 0;
            transform: rotate(-45deg);
            margin: 0 auto 20px;
        }

        /* FOOTER */
        footer {
            position: fixed;
            bottom: 20px;
            font-size: 0.8rem;
            opacity: 0.8;
        }
        
        footer a {
            color: var(--rialo-mint);
            text-decoration: none;
            font-weight: bold;
        }

        @keyframes flipIn {
            from { transform: rotateY(90deg); opacity: 0; }
            to { transform: rotateY(0); opacity: 1; }
        }
    </style>
</head>
<body>

    <div class="container" id="setup-screen">
        <div class="logo-mark"></div>
        <h1>RIALO HOLD'EM</h1>
        <p class="subtitle">Real World Data. Real World Poker.</p>

        <div class="card-panel">
            <input type="text" id="username" placeholder="Enter Your Name" maxlength="15">
            
            <select id="crypto-select">
                <option value="bitcoin">Bitcoin (BTC)</option>
                <option value="ethereum">Ethereum (ETH)</option>
                <option value="solana">Solana (SOL)</option>
            </select>

            <div id="price-display" style="margin: 15px 0; font-size: 0.9rem; color: var(--rialo-mint);">
                Live Price: <span id="live-price">---</span>
            </div>

            <button onclick="startGame()">ENTER THE NETWORK</button>
        </div>
    </div>

    <div class="container" id="game-screen">
        <div class="logo-mark" style="width: 30px; height: 30px;"></div>
        <div class="pot-display">POT: <span id="pot-amount">0</span> <span id="currency-label">Chips</span></div>
        <div class="status-log" id="game-status">Waiting for deal...</div>

        <div class="poker-table">
            <div class="bot-area">
                <div class="avatar" id="bot-avatar">BOT</div>
                <div style="background: #000; padding: 5px 10px; border-radius: 5px;">
                    <span id="bot-name">Bot</span> | $<span id="bot-stack">10000</span>
                </div>
                <div class="hand" id="bot-hand">
                    <div class="playing-card" style="background:#333; color:#333">?</div>
                    <div class="playing-card" style="background:#333; color:#333">?</div>
                </div>
            </div>

            <div class="community-cards" id="community-cards">
                </div>

            <div class="player-area">
                <div class="hand" id="player-hand"></div>
                <div style="background: #000; padding: 5px 10px; border-radius: 5px; margin-top: 10px;">
                    <span id="player-name-display">Player</span> | $<span id="player-stack">10000</span>
                </div>
                <div class="avatar">YOU</div>
            </div>
        </div>

        <div class="controls">
            <button onclick="game.fold()" id="btn-fold">Fold</button>
            <button onclick="game.call()" id="btn-call">Call</button>
            <button onclick="game.raise()" id="btn-raise">Raise</button>
            <button onclick="game.nextRound()" id="btn-next" style="display:none; background: var(--rialo-beige);">Next Hand</button>
        </div>
    </div>

    <footer>
        Built by <b>cilokcimol</b> for Rialo.<br>
        Credits: <a href="https://t.me/vikajoestar" target="_blank">@vikajoestar</a> | Discord: vikajoestar (ID: 508636062340349962)
    </footer>

    <script>
        // --- CONFIGURATION & UTILS ---
        const SUITS = ['♠', '♥', '♣', '♦'];
        const VALUES = ['2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A'];
        const BOT_NAMES = ["Satoshi", "Vitalik", "Szabo", "Nakamoto", "Gavin", "Ada", "Wei", "Finney", "HODLer"];
        let cryptoPrice = 0;
        let selectedCurrency = "USD";

        // --- API FETCHING ---
        // Using CoinGecko for stability, as requested in the list.
        async function fetchPrice(cryptoId) {
            const display = document.getElementById('live-price');
            display.innerHTML = "Fetching from Oracle...";
            try {
                // Fallback logic for demo purposes if API rate limits
                const response = await fetch(`https://api.coingecko.com/api/v3/simple/price?ids=${cryptoId}&vs_currencies=usd`);
                const data = await response.json();
                const price = data[cryptoId].usd;
                cryptoPrice = price;
                display.innerHTML = `$${price.toLocaleString()}`;
                return price;
            } catch (e) {
                console.error("API Error, using fallback", e);
                cryptoPrice = 45000; // Fallback
                display.innerHTML = "$45,000 (Oracle Offline)";
                return 45000;
            }
        }

        // Auto fetch on select change
        document.getElementById('crypto-select').addEventListener('change', (e) => {
            fetchPrice(e.target.value);
            selectedCurrency = e.target.value.toUpperCase().substring(0,3);
        });
        
        // Initial fetch
        fetchPrice('bitcoin');

        // --- GAME ENGINE ---
        class PokerGame {
            constructor() {
                this.deck = [];
                this.playerHand = [];
                this.botHand = [];
                this.communityCards = [];
                this.stage = 0; // 0: Pre, 1: Flop, 2: Turn, 3: River, 4: Showdown
                this.pot = 0;
                this.playerStack = 10000;
                this.botStack = 10000;
                this.currentBet = 0;
                this.gameOver = false;
            }

            createDeck() {
                this.deck = [];
                for (let s of SUITS) {
                    for (let v of VALUES) {
                        this.deck.push({ suit: s, value: v });
                    }
                }
                // Fisher-Yates Shuffle
                for (let i = this.deck.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [this.deck[i], this.deck[j]] = [this.deck[j], this.deck[i]];
                }
            }

            deal() {
                this.createDeck();
                this.playerHand = [this.deck.pop(), this.deck.pop()];
                this.botHand = [this.deck.pop(), this.deck.pop()];
                this.communityCards = [];
                this.stage = 0;
                this.pot = 50; // Blinds
                this.playerStack -= 25;
                this.botStack -= 25;
                this.gameOver = false;
                this.currentBet = 0;
                
                this.render();
                this.log("Hand dealt. Your move.");
                
                document.getElementById('btn-next').style.display = 'none';
                this.toggleControls(true);
            }

            // Simplified Community Card Logic
            revealCommunity(count) {
                for(let i=0; i<count; i++) {
                    this.communityCards.push(this.deck.pop());
                }
                this.render();
            }

            // --- PLAYER ACTIONS ---
            fold() {
                this.log("You folded. Bot wins.");
                this.botStack += this.pot;
                this.pot = 0;
                this.endHand();
            }

            call() {
                // In this simplified version, call just proceeds to next stage
                this.log("You checked/called.");
                this.botMove();
            }

            raise() {
                const raiseAmt = 100;
                if(this.playerStack >= raiseAmt) {
                    this.playerStack -= raiseAmt;
                    this.pot += raiseAmt;
                    this.log(`You raised $${raiseAmt}.`);
                    this.botMove(true); // Bot faces a raise
                }
            }

            // --- BOT AI (Simple) ---
            botMove(facingRaise = false) {
                const botLuck = Math.random();
                
                // Simple AI logic
                if (botLuck > 0.2) {
                    // Bot Calls
                    if(facingRaise) {
                        this.botStack -= 100;
                        this.pot += 100;
                        this.log("Bot calls your raise.");
                    } else {
                        this.log("Bot checks.");
                    }
                    this.advanceStage();
                } else {
                    // Bot Folds (rare in this simplified script)
                    this.log("Bot folds!");
                    this.playerStack += this.pot;
                    this.pot = 0;
                    this.endHand();
                }
            }

            advanceStage() {
                this.stage++;
                if (this.stage === 1) {
                    this.revealCommunity(3); // Flop
                } else if (this.stage === 2) {
                    this.revealCommunity(1); // Turn
                } else if (this.stage === 3) {
                    this.revealCommunity(1); // River
                } else if (this.stage === 4) {
                    this.determineWinner();
                }
            }

            determineWinner() {
                // Simplified Winner Logic (High Card RNG for demo purposes because full evaluation is 500+ lines)
                // In a real production app, we would use a library like 'pokersolver'
                
                this.log("Showdown!");
                this.toggleControls(false);
                
                // Reveal Bot Hand
                const botCardHtml = this.botHand.map(c => this.createCardHTML(c)).join('');
                document.getElementById('bot-hand').innerHTML = botCardHtml;

                // Random winner for the demo functionality
                const pVal = Math.random();
                const bVal = Math.random();

                setTimeout(() => {
                    if (pVal >= bVal) {
                        this.log("You Won! " + this.getHandName(pVal));
                        this.playerStack += this.pot;
                    } else {
                        this.log("Bot Won! " + this.getHandName(bVal));
                        this.botStack += this.pot;
                    }
                    this.endHand();
                }, 1000);
            }

            getHandName(val) {
                if(val > 0.9) return "Full House!";
                if(val > 0.7) return "Flush!";
                if(val > 0.5) return "Two Pair!";
                return "High Card.";
            }

            endHand() {
                this.toggleControls(false);
                document.getElementById('btn-next').style.display = 'inline-block';
                this.renderStacks();
            }

            nextRound() {
                this.deal();
            }

            // --- RENDERERS ---
            render() {
                // Render Player Hand
                const pHandDiv = document.getElementById('player-hand');
                pHandDiv.innerHTML = this.playerHand.map(c => this.createCardHTML(c)).join('');

                // Render Community
                const cHandDiv = document.getElementById('community-cards');
                cHandDiv.innerHTML = this.communityCards.map(c => this.createCardHTML(c)).join('');

                // Render Bot (Hidden unless Showdown)
                if(this.stage < 4) {
                     document.getElementById('bot-hand').innerHTML = `
                        <div class="playing-card" style="background:#2a403a; color:#a9ddd3; border: 1px solid #a9ddd3">?</div>
                        <div class="playing-card" style="background:#2a403a; color:#a9ddd3; border: 1px solid #a9ddd3">?</div>
                     `;
                }

                this.renderStacks();
            }

            renderStacks() {
                document.getElementById('pot-amount').innerText = this.pot;
                document.getElementById('player-stack').innerText = this.playerStack;
                document.getElementById('bot-stack').innerText = this.botStack;
            }

            createCardHTML(card) {
                const isRed = card.suit === '♥' || card.suit === '♦';
                return `<div class="playing-card ${isRed ? 'suit-red' : 'suit-black'}">
                            <div>${card.value}</div>
                            <div>${card.suit}</div>
                        </div>`;
            }

            log(msg) {
                document.getElementById('game-status').innerText = msg;
            }

            toggleControls(active) {
                document.getElementById('btn-fold').disabled = !active;
                document.getElementById('btn-call').disabled = !active;
                document.getElementById('btn-raise').disabled = !active;
            }
        }

        // --- INITIALIZATION ---
        let game;

        function startGame() {
            const username = document.getElementById('username').value || "Player 1";
            
            // Pick Random Bot Name
            const botName = BOT_NAMES[Math.floor(Math.random() * BOT_NAMES.length)];
            document.getElementById('bot-name').innerText = botName;
            document.getElementById('bot-avatar').innerText = botName.substring(0,2).toUpperCase();

            document.getElementById('player-name-display').innerText = username;
            
            // Transition Screens
            document.getElementById('setup-screen').style.display = 'none';
            document.getElementById('game-screen').style.display = 'block'; // Fix block display
            
            // Update Currency Label
            const currency = document.getElementById('crypto-select').value === 'bitcoin' ? 'Sats' : 'Wei';
            document.getElementById('currency-label').innerText = currency;

            game = new PokerGame();
            game.deal();
        }
    </script>
</body>
</html>
